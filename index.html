<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Oscar Valledor</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>

    <div class="page">

      <div class="top">
        <span>Oscar Valledor - <em>Architect of Ideas</em></span>
      </div>

      <div class="middle">
        <p>Strategy, Product, Brand.<br>
        Co-Founder of Project Lobster (acquired by Ace &amp; Tate).</p>
        <p id="quote" aria-live="polite"></p>
      </div>

      <div class="bottom">
        <div class="bottom-left">
          <span>© 2026</span>
          <div id="present" aria-live="polite">
            <span id="present-city"></span>
            <span id="present-coords"></span>
            <span id="present-time"></span>
            <span id="present-weather"></span>
            <span id="present-moon"></span>
          </div>
        </div>
        <nav>
          <a href="https://instagram.com/oscarvalledor" target="_blank">Instagram</a>
          <a href="https://www.linkedin.com/in/oscarvalledor/" target="_blank">LinkedIn</a>
          <a href="mailto:ovalledor@gmail.com">Email</a>
          <a href="#" id="books-link">Books</a>
        </nav>
      </div>

      <div id="books-view">
        <div class="books-list"></div>
        <div class="books-footer">
          <span></span>
          <nav>
            <a href="#" id="books-close">Close</a>
          </nav>
        </div>
      </div>

    </div>

  <script src="present.js"></script>
  <script>
    (async function () {
      try {
        const res = await fetch('quotes.json');
        const data = await res.json();
        if (data.quotes && data.quotes.length) {
          const q = data.quotes[Math.floor(Math.random() * data.quotes.length)];
          const el = document.getElementById('quote');
          el.textContent = q.text;
          el.classList.add('is-ready');
        }
      } catch (e) {}
    })();
  </script>
  <script>
    const booksLink = document.getElementById('books-link');
    const booksClose = document.getElementById('books-close');
    const page = document.querySelector('.page');
    const booksList = document.querySelector('.books-list');

    let booksData = null;

    async function loadBooks() {
      if (booksData) return booksData;
      const res = await fetch('books.json');
      booksData = await res.json();
      return booksData;
    }

    function renderBooks(data) {
      booksList.innerHTML = '';

      const sections = [
        { label: 'Currently reading', items: data.currentlyReading },
        { label: null, items: data.read },
      ];

      let first = true;
      for (const section of sections) {
        if (!section.items.length) continue;

        if (section.label) {
          const label = document.createElement('p');
          label.className = 'books-label';
          label.textContent = section.label;
          booksList.appendChild(label);
          first = false;
        }

        for (const book of section.items) {
          const p = document.createElement('p');
          const a = document.createElement('a');
          a.href = book.url;
          a.target = '_blank';
          a.textContent = `${book.title} — ${book.author}`;
          p.appendChild(a);
          booksList.appendChild(p);
        }
      }
    }

    booksLink.addEventListener('click', async function(e) {
      e.preventDefault();
      page.classList.add('books-active');
      const data = await loadBooks();
      renderBooks(data);
    });

    booksClose.addEventListener('click', function(e) {
      e.preventDefault();
      page.classList.remove('books-active');
    });
  </script>
  </body>
</html>
